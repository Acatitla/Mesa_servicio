<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mesa de Servicio</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <img src="/data/img/gam.jpeg" alt="Logo GAM" class="logo">
    <h1>Mesa de Servicio</h1>
  </header>

  <main>
    <section class="formulario-container">
      <h2><i class="fas fa-plus-circle"></i> Nuevo Reporte</h2>
      <form id="formulario" enctype="multipart/form-data">
        <div class="form-group">
          <label for="tipoServicio"><i class="fas fa-tools"></i> Tipo de Servicio *</label>
          <select name="tipoServicio" id="tipoServicio" required>
            <option value="" disabled selected>Seleccione...</option>
            <!-- Las opciones de tipo de servicio se cargarán dinámicamente -->
          </select>
        </div>

        <div class="form-group">
          <label for="direccion"><i class="fas fa-map-marker-alt"></i> Dirección *</label>
          <input type="text" name="direccion" id="direccion" required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="numeroExterior"><i class="fas fa-home"></i> Número Exterior</label>
            <input type="text" name="numeroExterior" id="numeroExterior">
          </div>

          <div class="form-group">
            <label for="colonia"><i class="fas fa-city"></i> Colonia *</label>
            <select name="colonia" id="colonia" required>
              <option value="" disabled selected>Seleccione...</option>
              <!-- Las opciones de colonia se cargarán dinámicamente -->
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="fecha"><i class="far fa-calendar-alt"></i> Fecha y Hora *</label>
          <input type="datetime-local" name="fecha" id="fecha" required>
        </div>

        <div class="form-group">
          <label for="origen"><i class="fas fa-source"></i> Origen *</label>
          <select name="origen" id="origen" required>
            <option value="" disabled selected>Seleccione...</option>
            <!-- Las opciones de origen se cargarán dinámicamente -->
          </select>
        </div>

        <div class="form-group">
          <label for="folio"><i class="fas fa-file-alt"></i> Folio</label>
          <input type="text" name="folio" id="folio">
        </div>

        <div class="form-group">
          <label for="referencias"><i class="fas fa-info-circle"></i> Referencias</label>
          <textarea name="referencias" id="referencias" rows="3"></textarea>
        </div>

        <div class="form-group">
          <label for="telefono"><i class="fas fa-phone"></i> Teléfono</label>
          <input type="text" name="telefono" id="telefono">
        </div>

        <div class="form-group">
          <label for="foto"><i class="fas fa-image"></i> Foto</label>
          <input type="file" name="foto" id="foto">
        </div>

        <button type="submit" class="btn-submit"><i class="fas fa-save"></i> Guardar Reporte</button>
      </form>
    </section>

    <section class="reportes-container">
      <h2><i class="fas fa-list"></i> Reportes</h2>
      <div id="reportes" class="reportes">
        <!-- Los reportes se cargarán aquí -->
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Mesa de Servicio | Todos los derechos reservados.</p>
  </footer>

  <script src="script.js"></script>
  <script>
    // Cargar los datos del formulario dinámicamente desde el backend
    async function cargarDatosFormulario() {
      try {
        const res = await fetch('/form-data');
        const data = await res.json();

        // Cargar los tipos de servicio
        const tipoServicioSelect = document.getElementById('tipoServicio');
        data.tiposServicio.forEach(tipo => {
          const option = document.createElement('option');
          option.value = tipo;
          option.textContent = tipo;
          tipoServicioSelect.appendChild(option);
        });

        // Cargar las colonias
        const coloniaSelect = document.getElementById('colonia');
        data.colonias.forEach(colonia => {
          const option = document.createElement('option');
          option.value = colonia;
          option.textContent = colonia;
          coloniaSelect.appendChild(option);
        });

        // Cargar los orígenes
        const origenSelect = document.getElementById('origen');
        data.origenes.forEach(origen => {
          const option = document.createElement('option');
          option.value = origen;
          option.textContent = origen;
          origenSelect.appendChild(option);
        });
      } catch (error) {
        console.error('Error al cargar los datos del formulario:', error);
      }
    }

    // Llamar a la función para cargar los datos cuando la página se cargue
    window.onload = cargarDatosFormulario;
  </script>
</body>
</html>
 