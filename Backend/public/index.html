<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mesa de Servicio GAM</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <img src="logo_gam.png" alt="Logo GAM" class="logo" />
    <h1>Mesa de Servicio GAM</h1>
  </header>

  <main>
    <form id="formularioReporte" enctype="multipart/form-data" method="POST" action="/api/reportes">
      <label for="direccion">Dirección:</label>
      <input type="text" name="direccion" id="direccion" required />

      <label for="colonia">Colonia:</label>
      <select name="colonia" id="colonia" required>
        <option value="">Selecciona una colonia</option>
      </select>

      <label for="origen">Origen del reporte:</label>
      <select name="origen" id="origen" required>
        <option value="">Selecciona origen</option>
        <option value="ciudadano">Ciudadano</option>
        <option value="officio">Officio</option>
        <option value="dmu">DMU</option>
      </select>

      <div id="folioField" style="display: none;">
        <label for="folio">Folio:</label>
        <input type="text" name="folio" id="folio" />
      </div>

      <label for="servicio">Tipo de servicio:</label>
      <select name="servicio" id="servicio" required>
        <option value="">Selecciona servicio</option>
        <option value="luminarias">Luminarias</option>
        <option value="baches">Baches</option>
        <option value="banquetas">Banquetas</option>
        <option value="fugas">Fugas</option>
      </select>

      <label for="imagen">Foto (opcional):</label>
      <input type="file" name="imagen" accept="image/*" />

      <button type="submit">Enviar reporte</button>
    </form>

    <section id="filtrosExportar">
      <h2>Exportar reportes</h2>
      <label for="filtroFecha">Filtrar por fecha:</label>
      <input type="date" id="filtroFecha" name="filtroFecha" />

      <label for="filtroColonia">Filtrar por colonia:</label>
      <select id="filtroColonia" name="filtroColonia">
        <option value="">Todas</option>
      </select>

      <button id="btnExportar">Exportar a Excel</button>
      <button id="btnExportarPDF">Exportar a PDF</button>
    </section>

    <section id="reportes">
      <h2>Reportes Recientes</h2>
      <div id="contenedorReportes">
        <!-- Aquí se insertan los reportes desde el backend -->
      </div>
    </section>
  </main>

  <script src="script.js"></script>
  <script>
    // Cargar colonias desde el archivo JSON
    fetch('/data/colonias.json')
      .then(res => res.json())
      .then(data => {
        const selectColonia = document.getElementById('colonia');
        const filtroColonia = document.getElementById('filtroColonia');
        data.forEach(colonia => {
          const option1 = document.createElement('option');
          option1.value = colonia;
          option1.textContent = colonia;
          selectColonia.appendChild(option1);

          const option2 = document.createElement('option');
          option2.value = colonia;
          option2.textContent = colonia;
          filtroColonia.appendChild(option2);
        });
      })
      .catch(err => console.error('Error al cargar colonias:', err));
  </script>
</body>
</html>
